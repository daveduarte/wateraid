<!DOCTYPE html>
<html lang="en" class="scroll-smooth">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>WaterAid: The 'Women for Water' Campaign Infographic</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;700;900&display=swap" rel="stylesheet">
    <style>
        body {
            font-family: 'Inter', sans-serif;
        }
        .chart-container {
            position: relative;
            width: 100%;
            max-width: 600px;
            margin-left: auto;
            margin-right: auto;
            height: 320px;
            max-height: 400px;
        }
        @media (min-width: 768px) {
            .chart-container {
                height: 350px;
            }
        }
        .kpi-card h3 {
            line-height: 1.2;
        }
        .loading-spinner {
            border: 4px solid rgba(255,255,255,.3);
            border-top: 4px solid #F7A823;
            border-radius: 50%;
            width: 24px;
            height: 24px;
            animation: spin 1s linear infinite;
        }
        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }
    </style>
</head>
<body class="bg-gray-50 text-gray-800">

    <main class="container mx-auto px-4 py-8 md:py-12">

        <header class="text-center mb-12 md:mb-20">
            <h1 class="text-4xl md:text-6xl font-black text-[#00A9E0] mb-4">Women for Water</h1>
            <p class="text-lg md:text-xl max-w-4xl mx-auto text-gray-600">A visual analysis of the critical need for Water, Sanitation, and Hygiene (WASH) in maternal healthcare, and WaterAid's strategic path forward.</p>
        </header>

        <section id="crisis" class="mb-16 md:mb-24">
            <div class="text-center mb-10">
                <h2 class="text-3xl md:text-4xl font-bold text-gray-900">The Global Maternal Health WASH Crisis</h2>
                <p class="mt-2 text-gray-600 max-w-3xl mx-auto">Millions of women and newborns face deadly risks due to the lack of basic services in healthcare facilities.</p>
            </div>
            <div class="grid grid-cols-1 md:grid-cols-3 gap-8 text-center">
                <div class="kpi-card bg-white rounded-lg shadow-lg p-6 transform hover:scale-105 transition-transform duration-300">
                    <div class="text-6xl font-black text-[#EC1C24] mb-3">16.6M</div>
                    <h3 class="text-xl font-bold text-gray-800">Women Give Birth Without Adequate WASH Annually</h3>
                    <p class="text-gray-500 mt-2">That's one woman every two seconds facing preventable infection risks during childbirth.</p>
                </div>
                <div class="kpi-card bg-white rounded-lg shadow-lg p-6 transform hover:scale-105 transition-transform duration-300">
                    <div class="text-6xl font-black text-[#EC1C24] mb-3">>1M</div>
                    <h3 class="text-xl font-bold text-gray-800">Deaths Annually Linked to Unclean Births</h3>
                    <p class="text-gray-500 mt-2">Infections are responsible for 11% of maternal mortality and 26% of neonatal deaths.</p>
                </div>
                <div class="kpi-card bg-white rounded-lg shadow-lg p-6 transform hover:scale-105 transition-transform duration-300">
                    <div class="text-6xl font-black text-[#EC1C24] mb-3">9.5M</div>
                    <h3 class="text-xl font-bold text-gray-800">Lives Lost Annually to Infections in HCFs</h3>
                    <p class="text-gray-500 mt-2">A third of these tragic, preventable deaths are among children.</p>
                </div>
            </div>
             <div class="mt-12 bg-white rounded-lg shadow-md p-6">
                <h3 class="text-2xl font-bold text-center mb-6">Widespread Deficiencies in Healthcare Facilities</h3>
                <div class="chart-container mx-auto">
                    <canvas id="deficienciesChart"></canvas>
                </div>
                <p class="text-center text-gray-600 mt-4">A staggering number of people receive care in facilities that lack the most fundamental services, creating a breeding ground for infection.</p>
            </div>
        </section>

        <section id="response" class="mb-16 md:mb-24">
            <div class="text-center mb-10">
                <h2 class="text-3xl md:text-4xl font-bold text-gray-900">WaterAid's Strategic Response</h2>
                <p class="mt-2 text-gray-600 max-w-3xl mx-auto">With over 40 years of experience, WaterAid implements a comprehensive, multi-layered strategy to create lasting change.</p>
            </div>
            <div class="grid grid-cols-1 md:grid-cols-2 gap-8 items-center">
                <div class="bg-white rounded-lg shadow-md p-6">
                    <h3 class="text-2xl font-bold text-center mb-6">A Multi-Faceted Approach</h3>
                    <div class="chart-container mx-auto">
                        <canvas id="approachChart"></canvas>
                    </div>
                     <p class="text-center text-gray-600 mt-4">The strategy combines policy influence, economic advocacy, and community empowerment to address the root causes of the WASH crisis.</p>
                </div>
                <div class="bg-white rounded-lg shadow-md p-6">
                    <h3 class="text-2xl font-bold text-center mb-6">Driving Systemic Change</h3>
                    <div class="space-y-4">
                        <div class="flex items-center">
                            <div class="flex-shrink-0 bg-[#00A9E0] h-12 w-12 rounded-full flex items-center justify-center text-white font-bold text-xl">1</div>
                            <div class="ml-4">
                                <h4 class="text-lg font-semibold">Evidence & Research</h4>
                                <p class="text-gray-600">Collaborating with academic partners to generate robust data that informs effective interventions.</p>
                            </div>
                        </div>
                        <div class="flex justify-center h-8">
                            <span class="text-2xl text-gray-400 font-light">↓</span>
                        </div>
                        <div class="flex items-center">
                            <div class="flex-shrink-0 bg-[#F7A823] h-12 w-12 rounded-full flex items-center justify-center text-white font-bold text-xl">2</div>
                            <div class="ml-4">
                                <h4 class="text-lg font-semibold">Policy & Guideline Development</h4>
                                <p class="text-gray-600">Supporting governments to create national roadmaps for 100% WASH coverage in HCFs.</p>
                            </div>
                        </div>
                        <div class="flex justify-center h-8">
                            <span class="text-2xl text-gray-400 font-light">↓</span>
                        </div>
                        <div class="flex items-center">
                            <div class="flex-shrink-0 bg-[#73BF43] h-12 w-12 rounded-full flex items-center justify-center text-white font-bold text-xl">3</div>
                            <div class="ml-4">
                                <h4 class="text-lg font-semibold">Community Empowerment</h4>
                                <p class="text-gray-600">Ensuring local communities, especially women, lead the design and management of WASH solutions.</p>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </section>

        <section id="economics" class="mb-16 md:mb-24 bg-[#00A9E0] text-white rounded-2xl p-8 md:p-12">
            <div class="text-center mb-10">
                <h2 class="text-3xl md:text-4xl font-bold">The Economic Imperative</h2>
                <p class="mt-2 text-blue-100 max-w-3xl mx-auto">The cost of inaction is staggering, while the investment in WASH offers an incredible return.</p>
            </div>
            <div class="grid grid-cols-1 md:grid-cols-2 gap-8 items-center">
                <div class="bg-white/20 backdrop-blur-sm rounded-lg p-6">
                    <h3 class="text-2xl font-bold text-center mb-6">Cost of Inaction vs. Investment</h3>
                    <div class="chart-container mx-auto">
                        <canvas id="economicChart"></canvas>
                    </div>
                    <p class="text-center text-blue-100 mt-4">The $8.4 billion annual cost of healthcare-acquired infections in Sub-Saharan Africa dwarfs the minimal investment needed for basic WASH.</p>
                </div>
                <div class="text-center">
                    <div class="text-7xl font-black text-white">122M</div>
                    <h3 class="text-2xl font-bold mt-2">Unpaid Workdays</h3>
                    <p class="text-lg text-blue-100 mt-2">Could be freed up for women and girls annually with universal access to running water, unlocking opportunities for education and economic participation.</p>
                </div>
            </div>
        </section>

        <section id="empowerment" class="mb-16 md:mb-24">
            <div class="text-center mb-10">
                <h2 class="text-3xl md:text-4xl font-bold text-gray-900">Women at the Center of the Solution</h2>
                <p class="mt-2 text-gray-600 max-w-3xl mx-auto">The 'Women for Water' campaign reframes women not as victims, but as powerful agents of change.</p>
            </div>
            <div class="grid grid-cols-1 md:grid-cols-2 gap-8">
                <div class="border-2 border-[#EC1C24] rounded-lg p-6 text-center">
                    <h3 class="text-2xl font-bold text-[#EC1C24] mb-4">The Disproportionate Burden</h3>
                    <p class="text-lg mb-2">Time lost collecting water.</p>
                    <p class="text-lg mb-2">Risks to safety and dignity.</p>
                    <p class="text-lg mb-2">Unique health needs unmet.</p>
                    <p class="text-lg">Exposure to infection during childbirth.</p>
                </div>
                <div class="border-2 border-[#73BF43] rounded-lg p-6 text-center">
                    <h3 class="text-2xl font-bold text-[#73BF43] mb-4">The Empowered Response</h3>
                    <p class="text-lg mb-2">Leading community WASH committees.</p>
                    <p class="text-lg mb-2">Designing gender-responsive facilities.</p>
                    <p class="text-lg mb-2">Advocating for policy change.</p>
                    <p class="text-lg">Driving hygiene behavior change.</p>
                </div>
            </div>
        </section>

        <section id="llm-features" class="mb-16 md:mb-24 bg-white rounded-2xl shadow-lg p-8 md:p-12">
            <div class="text-center mb-10">
                <h2 class="text-3xl md:text-4xl font-bold text-gray-900">Amplify the Message</h2>
                <p class="mt-2 text-gray-600 max-w-3xl mx-auto">Leverage AI to craft compelling campaign slogans and key advocacy points.</p>
            </div>
            <div class="grid grid-cols-1 md:grid-cols-2 gap-8">
                <div class="bg-gray-100 rounded-lg p-6 flex flex-col items-center justify-between">
                    <h3 class="text-2xl font-bold text-gray-800 mb-4">Craft a Slogan</h3>
                    <button id="generateSloganBtn" class="bg-[#F7A823] text-gray-900 font-bold py-3 px-6 rounded-lg hover:bg-yellow-400 transition-colors duration-300 transform hover:scale-105 mb-4">
                        Generate Slogan ✨
                    </button>
                    <div id="sloganLoading" class="hidden flex justify-center items-center mb-4">
                        <div class="loading-spinner"></div>
                        <span class="ml-3 text-gray-500">Generating...</span>
                    </div>
                    <p id="sloganOutput" class="text-xl italic text-center text-gray-700 min-h-[50px] flex items-center justify-center">Click the button to generate a slogan.</p>
                    <p id="sloganError" class="text-red-500 mt-2 hidden text-center"></p>
                </div>
                <div class="bg-gray-100 rounded-lg p-6 flex flex-col items-center justify-between">
                    <h3 class="text-2xl font-bold text-gray-800 mb-4">Advocacy Points</h3>
                    <button id="generateAdvocacyBtn" class="bg-[#73BF43] text-white font-bold py-3 px-6 rounded-lg hover:bg-green-600 transition-colors duration-300 transform hover:scale-105 mb-4">
                        Get Advocacy Points ✨
                    </button>
                    <div id="advocacyLoading" class="hidden flex justify-center items-center mb-4">
                        <div class="loading-spinner"></div>
                        <span class="ml-3 text-gray-500">Generating...</span>
                    </div>
                    <ul id="advocacyOutput" class="text-base text-gray-700 list-disc list-inside space-y-2 min-h-[100px] flex flex-col justify-center">
                        <li class="text-center">Click the button to get advocacy points.</li>
                    </ul>
                    <p id="advocacyError" class="text-red-500 mt-2 hidden text-center"></p>
                </div>
            </div>
            
            <div class="mt-12 pt-8 border-t border-gray-200">
                <div class="text-center mb-6">
                    <h3 class="text-3xl md:text-4xl font-bold text-gray-900">Local WASH Insights & Action</h3>
                    <p class="mt-2 text-gray-600 max-w-3xl mx-auto">Select a country to learn about its specific WASH challenges in maternal healthcare facilities and generate localized calls to action.</p>
                </div>
                <div class="flex flex-col md:flex-row items-center justify-center gap-4 mb-6">
                    <label for="countrySelect" class="sr-only">Select Country</label>
                    <select id="countrySelect" class="flex-grow md:w-1/2 p-3 rounded-lg border border-gray-300 bg-gray-100 text-gray-800 focus:outline-none focus:ring-2 focus:ring-[#00A9E0]">
                        <option value="">Select a Country</option>
                        <option value="Cambodia">Cambodia</option>
                        <option value="Germany">Germany</option>
                        <option value="Ghana">Ghana</option>
                        <option value="Japan">Japan</option>
                        <option value="Liberia">Liberia</option>
                        <option value="Malawi">Malawi</option>
                        <option value="Mali">Mali</option>
                        <option value="Nepal">Nepal</option>
                        <option value="Nigeria">Nigeria</option>
                        <option value="Rwanda">Rwanda</option>
                        <option value="Sweden">Sweden</option>
                        <option value="Tanzania">Tanzania</option>
                        <option value="Uganda">Uganda</option>
                        <option value="UK">UK</option>
                        <option value="USA">USA</option>
                        <option value="Zambia">Zambia</option>
                    </select>
                    <button id="getCountryBriefingBtn" class="bg-[#00A9E0] text-white font-bold py-3 px-6 rounded-lg hover:bg-blue-600 transition-colors duration-300 transform hover:scale-105">
                        Get Country Briefing ✨
                    </button>
                </div>
                <div id="countryBriefingLoading" class="hidden flex justify-center items-center mb-4">
                    <div class="loading-spinner"></div>
                    <span class="ml-3 text-gray-500">Fetching country briefing...</span>
                </div>
                <div id="countryBriefingOutput" class="bg-gray-100 p-6 rounded-lg shadow-inner text-gray-700 min-h-[70px] flex items-center justify-center text-center italic">
                    Select a country and click "Get Country Briefing" for a quick overview.
                </div>
                <p id="countryBriefingError" class="text-red-500 mt-2 hidden text-center"></p>

                <!-- New Buttons for Localized Content -->
                <div class="flex flex-col md:flex-row items-center justify-center gap-4 mt-8">
                    <button id="getAdvocacyPointsLocalBtn" class="bg-[#73BF43] text-white font-bold py-3 px-6 rounded-lg hover:bg-green-600 transition-colors duration-300 transform hover:scale-105">
                        Get Local Advocacy Points ✨
                    </button>
                    <button id="generateSocialPostLocalBtn" class="bg-[#A23F97] text-white font-bold py-3 px-6 rounded-lg hover:bg-purple-700 transition-colors duration-300 transform hover:scale-105">
                        Generate Social Post ✨
                    </button>
                </div>

                <div id="localizedOutputLoading" class="hidden flex justify-center items-center mt-4">
                    <div class="loading-spinner"></div>
                    <span class="ml-3 text-gray-500">Generating localized content...</span>
                </div>
                
                <div id="localizedAdvocacyOutput" class="bg-gray-100 p-6 rounded-lg shadow-inner text-gray-700 mt-6 min-h-[100px] hidden">
                    <h4 class="text-xl font-bold text-gray-800 mb-2">Advocacy Points:</h4>
                    <ul class="list-disc list-inside space-y-2"></ul>
                </div>
                <p id="localizedAdvocacyError" class="text-red-500 mt-2 hidden text-center"></p>

                <div id="localizedSocialPostOutput" class="bg-gray-100 p-6 rounded-lg shadow-inner text-gray-700 mt-6 min-h-[100px] hidden">
                    <h4 class="text-xl font-bold text-gray-800 mb-2">Social Media Post:</h4>
                    <p class="text-base break-words text-left"></p>
                </div>
                <p id="localizedSocialPostError" class="text-red-500 mt-2 hidden text-center"></p>

            </div>
        </section>

        <section id="call-to-action" class="bg-gray-800 text-white rounded-2xl p-8 md:p-12 text-center">
             <h2 class="text-3xl md:text-4xl font-bold">The Path Forward: A Campaign for Change</h2>
             <p class="mt-3 text-gray-300 max-w-3xl mx-auto">The 'Women for Water' campaign will succeed by amplifying personal stories, making the economic case, and advocating for investment and better governance.</p>
             <div class="mt-8">
                <a href="take-action.html" class="inline-block bg-[#F7A823] text-gray-900 font-bold text-lg px-8 py-4 rounded-lg hover:bg-yellow-400 transition-colors duration-300 transform hover:scale-105">Join the Movement</a>
             </div>
        </section>

    </main>
    <script>
        const vibrantPalette = ['#00A9E0', '#F7A823', '#73BF43', '#EC1C24', '#A23F97'];
        const grayPalette = ['#6B7280', '#9CA3AF', '#D1D5DB'];

        function wrapLabel(str, maxWidth) {
            if (str.length <= maxWidth) {
                return str;
            }
            const words = str.split(' ');
            const lines = [];
            let currentLine = '';
            for (const word of words) {
                if ((currentLine + ' ' + word).trim().length > maxWidth) {
                    lines.push(currentLine.trim());
                    currentLine = word;
                } else {
                    currentLine = (currentLine + ' ' + word).trim();
                }
            }
            if (currentLine) {
                lines.push(currentLine.trim());
            }
            return lines;
        }

        const tooltipTitleCallback = {
            plugins: {
                tooltip: {
                    callbacks: {
                        title: function(tooltipItems) {
                            const item = tooltipItems[0];
                            let label = item.chart.data.labels[item.dataIndex];
                            if (Array.isArray(label)) {
                                return label.join(' ');
                            }
                            return label;
                        }
                    }
                }
            }
        };

        const deficienciesChartCtx = document.getElementById('deficienciesChart').getContext('2d');
        const deficienciesData = {
            labels: [
                wrapLabel('People lacking basic water service in HCFs', 20),
                wrapLabel('People lacking basic sanitation service in HCFs', 20),
                wrapLabel('People lacking basic hygiene service in HCFs', 20)
            ],
            datasets: [{
                label: 'People Affected (in Millions)',
                data: [742, 660, 722],
                backgroundColor: [vibrantPalette[0], vibrantPalette[1], vibrantPalette[2]],
                borderColor: '#ffffff',
                borderWidth: 2
            }]
        };
        new Chart(deficienciesChartCtx, {
            type: 'bar',
            data: deficienciesData,
            options: {
                ...tooltipTitleCallback,
                responsive: true,
                maintainAspectRatio: false,
                indexAxis: 'y',
                scales: {
                    x: {
                        beginAtZero: true,
                        title: { display: true, text: 'Millions of People' }
                    }
                },
                plugins: {
                    ...tooltipTitleCallback.plugins,
                    legend: { display: false },
                    title: { display: true, text: 'Global WASH Deficiencies in Healthcare Facilities' }
                }
            }
        });

        const approachChartCtx = document.getElementById('approachChart').getContext('2d');
        const approachData = {
            labels: ['Human Rights & Dignity', 'Economic Value', 'Global Health Security (AMR)', 'Gender Equality', 'Life-Saving Impact'],
            datasets: [{
                label: 'Strategic Focus',
                data: [9, 8, 9, 10, 10],
                backgroundColor: 'rgba(247, 168, 35, 0.2)',
                borderColor: vibrantPalette[1],
                pointBackgroundColor: vibrantPalette[1],
                pointBorderColor: '#fff',
                pointHoverBackgroundColor: '#fff',
                pointHoverBorderColor: vibrantPalette[1]
            }]
        };
        new Chart(approachChartCtx, {
            type: 'radar',
            data: approachData,
            options: {
                ...tooltipTitleCallback,
                responsive: true,
                maintainAspectRatio: false,
                elements: { line: { tension: 0.1 } },
                 scales: {
                    r: {
                        angleLines: { color: 'rgba(0, 0, 0, 0.1)' },
                        grid: { color: 'rgba(0, 0, 0, 0.1)' },
                        pointLabels: { font: { size: 12 } },
                        suggestedMin: 0,
                        suggestedMax: 10,
                         ticks: {
                           display: false,
                           stepSize: 2
                         }
                    }
                },
                plugins: {
                    ...tooltipTitleCallback.plugins,
                    legend: { display: false },
                }
            }
        });

        const economicChartCtx = document.getElementById('economicChart').getContext('2d');
        const economicData = {
            labels: ['Cost of Inaction', 'Cost of Intervention'],
            datasets: [{
                label: 'Annual Cost (Sub-Saharan Africa)',
                data: [8.4, 0.1],
                backgroundColor: [vibrantPalette[3], vibrantPalette[2]],
                barPercentage: 0.6,
                categoryPercentage: 0.7
            }]
        };
        new Chart(economicChartCtx, {
            type: 'bar',
            data: economicData,
            options: {
                ...tooltipTitleCallback,
                responsive: true,
                maintainAspectRatio: false,
                scales: {
                    y: {
                        beginAtZero: true,
                        ticks: {
                            callback: function(value) {
                                return '$' + value + 'B';
                            },
                            color: 'white'
                        },
                        grid: { color: 'rgba(255, 255, 255, 0.2)' },
                         title: { display: true, text: 'Billions (USD)', color: 'white' }
                    },
                    x: {
                        ticks: { color: 'white' },
                        grid: { display: false }
                    }
                },
                plugins: {
                    ...tooltipTitleCallback.plugins,
                    legend: { display: false },
                }
            }
        });

        // Gemini API Integration - Centralized function for text generation
        async function callGeminiAPI(prompt, outputElement, errorElement, loadingElement, isStructured = false) {
            outputElement.innerHTML = ''; // Clear previous content
            errorElement.classList.add('hidden'); // Hide any previous error
            loadingElement.classList.remove('hidden'); // Show loading spinner

            if (isStructured) {
                outputElement.classList.remove('flex', 'flex-col', 'items-center', 'justify-center');
                outputElement.classList.add('list-disc', 'list-inside', 'space-y-2');
            } else {
                outputElement.classList.remove('list-disc', 'list-inside', 'space-y-2');
                outputElement.classList.add('italic', 'flex', 'items-center', 'justify-center');
            }

            try {
                let chatHistory = [];
                chatHistory.push({ role: "user", parts: [{ text: prompt }] });
                let payload = { contents: chatHistory };

                if (isStructured) {
                    payload.generationConfig = {
                        responseMimeType: "application/json",
                        responseSchema: {
                            type: "ARRAY",
                            items: { "type": "STRING" }
                        }
                    };
                }

                // IMPORTANT: PASTE YOUR ACTUAL GEMINI API KEY HERE.
                // Example: const apiKey = "AIzaSy_YOUR_ACTUAL_API_KEY_GOES_HERE";
                const apiKey = "AIzaSyCP3pAGnq7WtIPpoW44izVOE4U75LKNbwg"; // Replace with your actual key
                
                const apiUrl = `https://generativelanguage.googleapis.com/v1beta/models/gemini-2.0-flash:generateContent?key=${apiKey}`;

                const response = await fetch(apiUrl, {
                    method: 'POST',
                    headers: { 'Content-Type': 'application/json' },
                    body: JSON.stringify(payload)
                });

                const result = await response.json();

                if (result.candidates && result.candidates.length > 0 &&
                    result.candidates[0].content && result.candidates[0].content.parts &&
                    result.candidates[0].content.parts.length > 0) {
                    const text = result.candidates[0].content.parts[0].text;

                    if (isStructured) {
                        try {
                            const parsedJson = JSON.parse(text);
                            if (Array.isArray(parsedJson) && parsedJson.length > 0) {
                                outputElement.classList.remove('flex', 'items-center', 'justify-center');
                                parsedJson.forEach(item => {
                                    const li = document.createElement('li');
                                    li.textContent = item;
                                    outputElement.appendChild(li);
                                });
                            } else {
                                outputElement.innerHTML = `<li class="text-center text-gray-500">No content generated.</li>`;
                            }
                            outputElement.classList.remove('hidden');
                        } catch (e) {
                            errorElement.textContent = `Error: Could not parse response.`;
                            errorElement.classList.remove('hidden');
                        }
                    } else {
                        outputElement.textContent = text;
                        // For non-structured output elements, always show it.
                        outputElement.classList.remove('hidden');
                        if (outputElement.id === 'countryBriefingOutput' || outputElement.id === 'localizedSocialPostOutput' || outputElement.querySelector('ul') === null) {
                            outputElement.style.textAlign = 'left';
                            outputElement.classList.remove('italic', 'flex', 'items-center', 'justify-center');
                        } else {
                             outputElement.style.textAlign = 'center';
                             outputElement.classList.add('italic', 'flex', 'items-center', 'justify-center');
                        }
                    }
                } else {
                    if (result.error && result.error.message) {
                        errorElement.textContent = `API Error: ${result.error.message}`;
                    } else {
                        errorElement.textContent = `Error: No content generated or unexpected response structure.`;
                    }
                    errorElement.classList.remove('hidden');
                }
            } catch (error) {
                errorElement.textContent = `Error: Failed to connect to AI. Please check your API key and network.`;
                errorElement.classList.remove('hidden');
            } finally {
                loadingElement.classList.add('hidden');
            }
        }


        // Slogan generation
        const generateSloganBtn = document.getElementById('generateSloganBtn');
        const sloganOutput = document.getElementById('sloganOutput');
        const sloganError = document.getElementById('sloganError');
        const sloganLoading = document.getElementById('sloganLoading');

        generateSloganBtn.addEventListener('click', () => {
            const prompt = "Generate only one concise and impactful campaign slogan for a campaign called 'Women for Water' that focuses on empowering women to improve water, sanitation, and hygiene in healthcare facilities. The slogan should be suitable for an awareness campaign.";
            callGeminiAPI(prompt, sloganOutput, sloganError, sloganLoading, false);
        });

        // Main Advocacy points generation (retained for general advocacy if needed)
        const generateAdvocacyBtn = document.getElementById('generateAdvocacyBtn');
        const advocacyOutput = document.getElementById('advocacyOutput');
        const advocacyError = document.getElementById('advocacyError');
        const advocacyLoading = document.getElementById('advocacyLoading');

        generateAdvocacyBtn.addEventListener('click', () => {
            const prompt = "Generate 3 concise advocacy message points for a campaign focused on improving water, sanitation, and hygiene (WASH) in maternal healthcare facilities. Each point should highlight a different aspect: human rights, economic impact, and community empowerment. Respond as a JSON array of strings.";
            callGeminiAPI(prompt, advocacyOutput, advocacyError, advocacyLoading, true);
        });

        // Country Briefing generation
        const countrySelect = document.getElementById('countrySelect');
        const getCountryBriefingBtn = document.getElementById('getCountryBriefingBtn');
        const countryBriefingOutput = document.getElementById('countryBriefingOutput');
        const countryBriefingError = document.getElementById('countryBriefingError');
        const countryBriefingLoading = document.getElementById('countryBriefingLoading');

        getCountryBriefingBtn.addEventListener('click', () => {
            const selectedCountry = countrySelect.value.trim();
            if (!selectedCountry) {
                countryBriefingError.textContent = 'Please select a country from the dropdown.';
                countryBriefingError.classList.remove('hidden');
                countryBriefingOutput.textContent = 'Select a country and click "Get Country Briefing" for a quick overview.';
                countryBriefingOutput.style.textAlign = 'center';
                countryBriefingOutput.classList.add('italic', 'flex', 'items-center', 'justify-center');
                return;
            }
            const prompt = `Provide a concise briefing (less than 70 words, simple and accessible language) on the primary Water, Sanitation, and Hygiene (WASH) issues specifically within maternal healthcare facilities in ${selectedCountry}.`;
            callGeminiAPI(prompt, countryBriefingOutput, countryBriefingError, countryBriefingLoading, false);
        });


        // Localized Advocacy Points generation
        const getAdvocacyPointsLocalBtn = document.getElementById('getAdvocacyPointsLocalBtn');
        const localizedAdvocacyOutput = document.querySelector('#localizedAdvocacyOutput ul'); // Select the UL inside the div
        const localizedAdvocacyOutputDiv = document.getElementById('localizedAdvocacyOutput'); // The parent div to show/hide
        const localizedAdvocacyError = document.getElementById('localizedAdvocacyError');
        const localizedOutputLoading = document.getElementById('localizedOutputLoading'); // Centralized loading for local buttons

        getAdvocacyPointsLocalBtn.addEventListener('click', () => {
            const selectedCountry = countrySelect.value.trim();
            if (!selectedCountry) {
                localizedAdvocacyError.textContent = 'Please select a country first to get localized advocacy points.';
                localizedAdvocacyError.classList.remove('hidden');
                localizedAdvocacyOutputDiv.classList.add('hidden'); // Hide the output div
                return;
            }
            localizedAdvocacyOutputDiv.classList.remove('hidden'); // Show output div before loading
            const prompt = `Generate 3 concise advocacy points related to improving Water, Sanitation, and Hygiene (WASH) in maternal healthcare facilities for ${selectedCountry}. Each point should be simple, accessible, and grounded in a verifiable fact or common challenge for that region. Respond as a JSON array of strings.`;
            callGeminiAPI(prompt, localizedAdvocacyOutput, localizedAdvocacyError, localizedOutputLoading, true);
        });

        // Localized Social Media Post generation
        const generateSocialPostLocalBtn = document.getElementById('generateSocialPostLocalBtn');
        const localizedSocialPostOutput = document.querySelector('#localizedSocialPostOutput p'); // Select the P inside the div
        const localizedSocialPostOutputDiv = document.getElementById('localizedSocialPostOutput'); // The parent div to show/hide
        const localizedSocialPostError = document.getElementById('localizedSocialPostError');
        // localizedOutputLoading is reused for this as well

        generateSocialPostLocalBtn.addEventListener('click', () => {
            const selectedCountry = countrySelect.value.trim();
            const currentSlogan = sloganOutput.textContent === 'Click the button to generate a slogan.' ? 'Water for All, Dignity in Birth.' : sloganOutput.textContent;

            if (!selectedCountry) {
                localizedSocialPostError.textContent = 'Please select a country first to generate a social media post.';
                localizedSocialPostError.classList.remove('hidden');
                localizedSocialPostOutputDiv.classList.add('hidden'); // Hide the output div
                return;
            }
            localizedSocialPostOutputDiv.classList.remove('hidden'); // Show output div before loading
            const prompt = `Generate a social media post (less than 240 characters), in simple and accessible language, for the 'Women for Water' campaign targeting ${selectedCountry}. It must include the hashtag #WomenForWater and focus on a policy-related call to action for WASH in maternal healthcare in that country. Incorporate this slogan: "${currentSlogan}".`;
            callGeminiAPI(prompt, localizedSocialPostOutput, localizedSocialPostError, localizedOutputLoading, false);
        });

    </script>
</body>
</html>
